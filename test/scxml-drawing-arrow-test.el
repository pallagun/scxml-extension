(require 'ert)
(require 'scxml-drawing-arrow)

(ert-deftest test-scxml--arrow-path-simplify ()
  (let ((path-pts (list (2dg-point- 39.0 19.0)
                        (2dg-point- 39.0 27.21052631578948)
                        (2dg-point- 51.44444444444444 27.21052631578948)
                        (2dg-point- 51.44444444444444 27.0)
                        (2dg-point- 55.0 27.0)))
        (slack-x 1.0)
        (slack-y 1.0))
    (let ((output-path (scxml--arrow-path-simplify path-pts slack-x slack-y))
          (expected-path (list (2dg-point- 39 19)
                               (2dg-point- 39 27)
                               (2dg-point- 55 27))))
      (should (2dg-almost-equal (2dg-path :points output-path)
                                  (2dg-path :points expected-path))))))
